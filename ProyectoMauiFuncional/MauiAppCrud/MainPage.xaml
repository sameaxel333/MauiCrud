<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="MauiAppCrud.MainPage"
             xmlns:model="clr-namespace:MauiAppCrud.DTOs">



    <Grid RowDefinitions="Auto,Auto,*" RowSpacing="15" Margin="15">

        <Button 
    Grid.Row="0"
    Text="➕ Nuevo Paciente"
    Command="{Binding CrearCommand}"
    BorderColor="LightBlue"
    BorderWidth="2"
    BackgroundColor="#E0F7FA"
    TextColor="DarkSlateGray"
    FontSize="Medium"
    FontAttributes="Bold"
    CornerRadius="12"
    Padding="10"
    Opacity="0.95"
    />
        <Label Grid.Row="1"  Text="Lista de Pacientes"  FontSize ="Subtitle"/>

        <ScrollView Grid.Row="2">

            <CollectionView ItemsSource="{Binding ListaPaciente}">

                <CollectionView.ItemsLayout>
                    <LinearItemsLayout ItemSpacing="5" Orientation="Vertical" />
                </CollectionView.ItemsLayout>

                <CollectionView.ItemTemplate>
                    <DataTemplate x:DataType="model:PacienteDTO">

                        <Border Padding="10,5" HorizontalOptions="FillAndExpand">
                            <Border.StrokeShape>
                                <RoundRectangle CornerRadius="5"/>
                            </Border.StrokeShape>

                            <Grid RowDefinitions="Auto,Auto,Auto,Auto,Auto,Auto,Auto,Auto,Auto,Auto,Auto"
                                  ColumnDefinitions ="Auto,*"
                                  >
                                
                                <Label Grid.Row="0" Grid.Column="0"
                                       Text="Nombre:" FontAttributes="Bold"/>
                                <Label Grid.Row="0" Grid.Column="1" HorizontalOptions="End"
                                       Text="{Binding Nombre}"/>
                                
                                <Label Grid.Row="1" Grid.Column="0"
                                       Text="Apellido:" FontAttributes="Bold"/>
                                <Label Grid.Row="1" Grid.Column="1" HorizontalOptions="End"
                                       Text="{Binding Apellido}"/>


                                <Label Grid.Row="2" Grid.Column="0"
                                       Text="Edad:" FontAttributes="Bold"/>
                                <Label Grid.Row="2" Grid.Column="1" HorizontalOptions="End"
                                       Text="{Binding Edad}"/>

                                <Label Grid.Row="3" Grid.Column="0"
                                       Text="Apellido:" FontAttributes="Bold"/>
                                <Label Grid.Row="3" Grid.Column="1" HorizontalOptions="End"
                                       Text="{Binding Peso}"/>


                                <Label Grid.Row="4" Grid.Column="0"
                                       Text="Estatura:" FontAttributes="Bold"/>
                                <Label Grid.Row="4" Grid.Column="1" HorizontalOptions="End"
                                       Text="{Binding Estatura}"/>

                                <Label Grid.Row="5" Grid.Column="0"
                                       Text="Sexo:" FontAttributes="Bold"/>
                                <Label Grid.Row="5" Grid.Column="1" HorizontalOptions="End"
                                       Text="{Binding Sexo}"/>
                                
                                <Label Grid.Row="6" Grid.Column="0"
                                       Text="Nivel de actividad:" FontAttributes="Bold"/>
                                <Label Grid.Row="6" Grid.Column="1" HorizontalOptions="End"
                                       Text="{Binding NivelActividad}"/>

                                <Label Grid.Row="7" Grid.Column="0"
                                       Text="Indice de Masa:" FontAttributes="Bold"/>
                                <Label Grid.Row="7" Grid.Column="1" HorizontalOptions="End"
                                       Text="{Binding IndiceMasa}"/>

                                <Label Grid.Row="8" Grid.Column="0"
                                       Text="Porcentaje de Grasa Corporal:" FontAttributes="Bold"/>
                                <Label Grid.Row="8" Grid.Column="1" HorizontalOptions="End"
                                       Text="{Binding PorcentajeGrasaCorporal}"/>

                                <Label Grid.Row="9" Grid.Column="0"
                                       Text="Gasto Energetico total:" FontAttributes="Bold"/>
                                <Label Grid.Row="9" Grid.Column="1" HorizontalOptions="End"
                                       Text="{Binding GastoEnergeticoTotal}"/>



                                <Label Grid.Row="10" Grid.Column="0" Padding="10,15,0,5"
                                    Text="Editar" TextColor="Green"
                                       >
                                    
                                    <Label.GestureRecognizers>
                                        <TapGestureRecognizer
                                            Command="{Binding BindingContext.EditarCommand,Source={x:RelativeSource AncestorType={x:Type ContentPage}}}"
                                            CommandParameter="{Binding }"
                                            />

                                    </Label.GestureRecognizers>
                                                                       
                                </Label>



                                <Label Grid.Row="10" Grid.Column="1" Padding="10,15,0,5"
                                    Text="Eliminar" TextColor="Red" HorizontalOptions="End"
                                       >

                                    <Label.GestureRecognizers>
                                        <TapGestureRecognizer
                                            Command="{Binding BindingContext.EliminarCommand,Source={x:RelativeSource AncestorType={x:Type ContentPage}}}"
                                            CommandParameter="{Binding }"
                                            />

                                    </Label.GestureRecognizers>

                                </Label>


                            </Grid>
                            
                        </Border>
                        
                    </DataTemplate>
                </CollectionView.ItemTemplate>
                
            </CollectionView>
            
        </ScrollView>

    </Grid>

    
</ContentPage>
