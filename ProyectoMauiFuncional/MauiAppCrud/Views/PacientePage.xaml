<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="MauiAppCrud.Views.PacientePage"
             Title="{Binding TituloPagina}">

    <ScrollView>
        <VerticalStackLayout Padding="20" Spacing="12">

            <!-- Indicador de carga -->
            <ActivityIndicator 
                IsVisible="{Binding LoadingEsVisible}" 
                IsRunning="{Binding LoadingEsVisible}"
                Color="Blue"
                HeightRequest="30"
                HorizontalOptions="Center"/>

            <!-- Campos del formulario -->
            <Label Text="Nombre" />
            <Entry Text="{Binding PacienteDtO.Nombre}" Placeholder="Ingrese el nombre" />

            <Label Text="Apellido" />
            <Entry Text="{Binding PacienteDtO.Apellido}" Placeholder="Ingrese el apellido" />

            <Label Text="Edad" />
            <Entry x:Name="EdadEntry"
           Text="{Binding PacienteDtO.Edad, Mode=TwoWay}"
           Keyboard="Numeric"
           Placeholder="Solo nÃºmeros"
           TextChanged="EdadEntry_TextChanged" />

            <Label Text="Peso en kg" />
            <Entry x:Name="PesoEntry"
       Text="{Binding PacienteDtO.Peso, Mode=TwoWay}"
       Keyboard="Numeric"
       Placeholder="Ej. 70.5"
       TextChanged="PesoEntry_TextChanged" />

            <Label Text="Estatura (cm)" />
            <Entry x:Name="EstaturaEntry"
       Text="{Binding PacienteDtO.Estatura, Mode=TwoWay}"
       Keyboard="Numeric"
       Placeholder="Ej. 170"
       TextChanged="EstaturaEntry_TextChanged" />


            <Label Text="Sexo" />
            <Picker Title="Selecciona tu sexo"
        SelectedItem="{Binding PacienteDtO.Sexo}">
                <Picker.ItemsSource>
                    <x:Array Type="{x:Type x:String}">
                        <x:String>Masculino</x:String>
                        <x:String>Femenino</x:String>
                    </x:Array>
                </Picker.ItemsSource>
            </Picker>

            <!-- Nivel de Actividad -->
            <Label Text="Nivel de Actividad" />
            <Picker Title="Seleccione un nivel"
        SelectedItem="{Binding PacienteDtO.NivelActividad}">
                <Picker.ItemsSource>
                    <x:Array Type="{x:Type x:String}">
                        <x:String>Bajo</x:String>
                        <x:String>Moderado</x:String>
                        <x:String>Alto</x:String>
                        <x:String>Muy alto</x:String>
                    </x:Array>
                </Picker.ItemsSource>
            </Picker>

            <!-- BotÃ³n Guardar -->
            <Button 
            Text="ðŸ’¾ Guardar"
            Command="{Binding GuardarCommand}"
            BackgroundColor="#4CAF50"        
            FontSize="16"
            FontAttributes="Bold"
            CornerRadius="12"
            Padding="14,8"
            HeightRequest="50"/>

        </VerticalStackLayout>
    </ScrollView>

</ContentPage>
